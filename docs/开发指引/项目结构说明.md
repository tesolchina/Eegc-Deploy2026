# EEGC-Nuxt 项目结构说明

## 项目简介

EEGC（English Essay Guidance Companion）是一款面向 HKBU 学生的 AI 英语写作辅导应用，基于 Nuxt 4 + Vue 3 全栈架构，使用 Supabase 作为数据库，集成 Poe API 提供 AI 对话能力。

---

## 目录结构总览

```
/
├── app/                        # 前端应用代码
│   ├── app.vue                 # 应用根组件
│   ├── pages/                  # 页面（基于文件的路由）
│   │   ├── index.vue           # 首页 / 登录入口
│   │   ├── eegc.vue            # 主应用界面（聊天 + 模式切换）
│   │   ├── student/
│   │   │   ├── login.vue       # 学生登录
│   │   │   └── signup.vue      # 学生注册
│   │   └── teacher/
│   │       ├── login.vue       # 教师登录
│   │       └── dashboard.vue   # 教师仪表盘
│   ├── components/             # Vue 组件
│   │   ├── AuthGuard.vue       # 鉴权守卫
│   │   ├── eegc/               # EEGC 核心 UI 组件
│   │   │   ├── ChatInterface.vue
│   │   │   ├── ModeSelector.vue
│   │   │   ├── CourseHeader.vue
│   │   │   ├── BriefingModeContent.vue
│   │   │   ├── BriefMode.vue
│   │   │   ├── BackgroundAndRubrics.vue
│   │   │   ├── TrainingTutorialSection.vue
│   │   │   └── WritingBotReport.vue
│   │   └── teacher/            # 教师端组件
│   │       ├── DashboardReportTable.vue
│   │       ├── DashboardStats.vue
│   │       ├── DuplicateIdModal.vue
│   │       └── ReportDetailModal.vue
│   ├── composables/            # 业务逻辑 Composables
│   │   ├── eegc.ts             # 聚合入口
│   │   └── eegc/
│   │       ├── useChatFunctions.js    # AI 聊天交互（含流式响应）
│   │       ├── useModeManager.js      # 模式管理（Briefing/Training/Assessment）
│   │       ├── useReportGenerator.js  # 报告生成与提交
│   │       ├── useApiConnection.js    # API 连接测试
│   │       ├── useNotification.js     # 通知提示
│   │       └── promptAndEssay.js      # 提示词与范文配置
│   └── constants/
│       └── eegcModes.ts        # 模式常量定义
│
├── server/                     # 后端 API（Nitro）
│   ├── api/
│   │   ├── poe-chat.post.ts           # AI 聊天代理（流式）
│   │   ├── submit-report.post.ts      # 报告提交
│   │   ├── student/
│   │   │   ├── login.post.ts          # 学生登录
│   │   │   ├── signup.post.ts         # 学生注册
│   │   │   └── submit-report.post.ts  # 学生报告提交
│   │   └── teacher/
│   │       ├── login.post.ts          # 教师登录
│   │       ├── reports.get.ts         # 获取报告列表
│   │       └── duplicate-check.get.ts # 重复 ID 检查
│   └── middleware/
│       └── auth.ts             # JWT 鉴权中间件
│
├── docs/                       # 项目文档
├── public/                     # 静态资源
├── nuxt.config.ts              # Nuxt 配置
├── tsconfig.json               # TypeScript 配置
├── package.json                # 依赖与脚本
└── Database_Schema.md          # 数据库表结构说明
```

---

## 核心技术栈

| 层面 | 技术 |
|------|------|
| 前端框架 | Nuxt 4.3 + Vue 3 |
| 样式 | TailwindCSS |
| 后端 | Nitro（Nuxt 内置服务器） |
| 数据库 | Supabase（外部 PostgreSQL） |
| AI 接口 | Poe API（OpenAI 兼容格式） |
| 认证 | JWT（学生 / 教师分开） |
| PDF 导出 | jspdf + html2canvas |
| Markdown 渲染 | markdown-it |

---

## 主要功能模块

1. **三步写作辅导模式**：Briefing（简报）、Training（训练）、Assessment（评估）
2. **AI 聊天**：流式响应，支持多模型切换
3. **学生系统**：注册（白名单控制）、登录、提交学习报告
4. **教师系统**：查看学生报告、统计数据、重复 ID 检查
5. **报告导出**：支持 PDF 和 Markdown 格式

---

## 环境变量

| 变量名 | 用途 |
|--------|------|
| `POE_API_KEY` | Poe API 认证 |
| `SUPABASE_URL` | Supabase 数据库地址 |
| `SUPABASE_PUBLISHABLE_KEY` | Supabase 数据库认证密钥 |
| `JWT_SECRET` | JWT 签名密钥 |
